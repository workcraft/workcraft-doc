<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>tutorial:model:d_flip_flop:start - Workcraft</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="tutorial,model,d_flip_flop,start"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.html" title="Workcraft"/>
<link rel="start" href="start.html"/>
<link rel="contents" href="start.html" title="Sitemap"/>
<link rel="manifest" href="../../lib/exe/manifest.html"/>
<link rel="alternate" type="application/rss+xml" title="Changes" />
<link rel="alternate" type="application/rss+xml" title="Current namespace" />
<link rel="edit" title="Edit this page" href="start.html"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/tutorial/model/d_flip_flop/start.xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/tutorial/model/d_flip_flop/start.raw"/>
<link rel="canonical" href="https://workcraft.org/tutorial/model/d_flip_flop/start"/>
<link rel="stylesheet" href="../../lib/exe/css.php.t.dokuwiki-light-export.css"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='tutorial:model:d_flip_flop';var SIG=" --- \/\/[[support@workcraft.org| ]] 2020\/11\/24 09:02\/\/";var JSINFO = {"fastwiki":{"secedit":1,"preview":1,"fastpages":1,"save":0,"fastshow":0,"fastshow_same_ns":1,"fastshow_include":"","fastshow_exclude":"","preload":false,"preload_head":"====47hsjwycv782nwncv8b920m8bv72jmdm3929bno3b3====","preload_batchsize":false,"preload_per_page":false,"locktime":840,"usedraft":1,"text_btn_show":"Show page","templatename":"dokuwiki-light-export"},"plugin_folded":{"hide":"hide","reveal":"reveal"},"move_renameokay":true,"id":"tutorial:model:d_flip_flop:start","namespace":"tutorial:model:d_flip_flop","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script charset="utf-8" src="../../lib/exe/jquery.php.t.dokuwiki-light-export.js" defer="defer"></script>
<script charset="utf-8" src="../../lib/exe/js.php.t.dokuwiki-light-export.js" defer="defer"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../favicon.ico" />
<link rel="apple-touch-icon" href="../../apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki-light-export loggedIn    ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <h1><a href="../../start.html"  accesskey="" title=""><img src="../../logo.png" width="381" height="64" alt="" /></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
<!--
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li class="action profile"><a href="start.html" title="Profile" rel="nofollow"><span>Profile</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M2 3h20c1.05 0 2 .95 2 2v14c0 1.05-.95 2-2 2H2c-1.05 0-2-.95-2-2V5c0-1.05.95-2 2-2m12 3v1h8V6h-8m0 2v1h8V8h-8m0 2v1h7v-1h-7m-6 3.91C6 13.91 2 15 2 17v1h12v-1c0-2-4-3.09-6-3.09M8 6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"/></svg></a></li><li class="action admin"><a href="start.html" title="Admin" rel="nofollow"><span>Admin</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z"/></svg></a></li><li class="action logout"><a href="start.html" title="Log Out" rel="nofollow"><span>Log Out</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M17 17.25V14h-7v-4h7V6.75L22.25 12 17 17.25M13 2a2 2 0 0 1 2 2v4h-2V4H4v16h9v-4h2v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9z"/></svg></a></li>                </ul>
            </div>
        -->
        <!-- SITE TOOLS -->
<!--
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start.html" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="tutorial:model:d_flip_flop:start" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../..//doku.html.doku.php.html" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="tutorial:model:d_flip_flop:start" /><input type="hidden" name="sectok" value="76e97b919f59bf5330d969a72ba5bf17" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Edit this page</option><option value="revisions">Old revisions</option><option value="export_pdf">Export to PDF</option><option value="menuitemfolded">Fold/unfold all</option><option value="menuitem">Rename Page</option><option value="siteexport_addpage">Export Page to HTML/PDF</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Changes</option><option value="media">Media</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="profile">Profile</option><option value="admin">Admin</option><option value="logout">Log Out</option></optgroup></select><button type="submit">&gt;</button></div></form>            </div>
            <ul>
                <li class="action recent"><a href="start.html" title="Changes [r]" rel="nofollow" accesskey="r">Changes</a></li><li class="action media"><a href="start.html" title="Media" rel="nofollow">Media</a></li><li class="action index"><a href="start.html" title="Sitemap [x]" rel="nofollow" accesskey="x">Sitemap</a></li>            </ul>
        </div>
-->
    </div>

    <!-- BREADCRUMBS -->
<!--
    -->


    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>tutorial:model:d_flip_flop:start</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="plugin_fastwiki_marker" style="display:none"></div>
<h1 id="modelling_d_flip-flop_with_wtg_guards">Modelling D flip-flop with WTG guards</h1>
<div class="level1">

<p>
<a href="https://en.wikipedia.org/wiki/Flip-flop_(electronics)#D_flip-flop" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/Flip-flop_(electronics)#D_flip-flop"> D Flip-flop</a> is a very popular circuit with digital electronics that implements a basic memory element. This tutorial will introduce the use of guards in WTGs by using a flip-flop as an example. Check <a href="../../design/basic_buck-wtg/start.html" class="wikilink1" title="tutorial:design:basic_buck-wtg:start" data-wiki-id="tutorial:design:basic_buck-wtg:start">Design of Waveform Transition Graph for basic buck controller</a> before attempting to complete this tutorial.
</p>

<p>
A D flip-flop is composed of four signals, two inputs and two outputs. It captures the value of its data input signal <code><span style='color:red; '>D</span></code> at a specific change of its clock input signal <code><span style='color:red; '>CLK</span></code>. For example, at every rising transition of <code><span style='color:red; '>CLK</span></code>. The captured value becomes the output signal <code><span style='color:blue; '>Q</span></code> until a different value is captured. The remaining output signal <code><span style='color:blue; '>Q&#039;</span></code> corresponds to the complementary of signal <code><span style='color:blue; '>Q</span></code>.
</p>

<p>
In this example, the value for signal <code><span style='color:red; '>D</span></code> is irrelevant most of the time and must be ignored until the rising edge of <code><span style='color:red; '>CLK</span></code>. This makes it a natural fit for design with <abbr title="Waveform Transition Graph">WTG</abbr>.
</p>

</div>

<h2 id="modelling">Modelling</h2>
<div class="level2">

<p>
Often the first step in <abbr title="Waveform Transition Graph">WTG</abbr> design is defining the initialization of the circuit. In this case, we will assume that all the inputs start at <code>low</code>, with the outputs <code><span style='color:blue; '>Q</span></code> and <code><span style='color:blue; '>_Q</span></code> at <code>low</code> and <code>high</code> respectively. The only initialization needed for the flip-flop is for signal <code><span style='color:red; '>D</span></code>. It starts at <code>low</code>, but afterwards it might arbitrarily change value. Our circuit should ignore any changes that <code><span style='color:red; '>D</span></code> performs before a rising edge. This can be specified by an <code>unstable</code> transition. Note that, since <code><span style='color:red; '>D</span></code> needs to become stable before the next transition of <code><span style='color:red; '>CLK</span></code>, the <code>unstable</code> transition must be followed by a <code>stable</code> transition.
</p>
<p><a class="folder" href="#folded_46dcb24ea3a62b13a5679701b5b847d1_1">Detailed instructions </a></p><div class="folded hidden" id="folded_46dcb24ea3a62b13a5679701b5b847d1_1"><ul>
<li class="level1 node"><div class="li"> Create the initialisation structure at the state level:</div>
<ul>
<li class="level2"><div class="li"> Place a new state and double click on it to make it initial.</div>
</li>
<li class="level2"><div class="li"> Add a new waveform and rename it to <em>initialisation</em>.</div>
</li>
<li class="level2"><div class="li"> Connect the initial state to the initialisation waveform.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Complete the initialisation waveform:</div>
<ul>
<li class="level2"><div class="li"> Double click on the waveform to move into the waveform level.</div>
</li>
<li class="level2"><div class="li"> Use the signal tool to create 4 new signals. Hold <kbd class="__keyboard">Shift</kbd> while placing two of them to make them into inputs. Rename the signals with the property editor into <code><span style='color:red; '>D</span></code>, <code><span style='color:red; '>CLK</span></code>, <code><span style='color:blue; '>Q</span></code> and <code><span style='color:blue; '>_Q</span></code>.</div>
</li>
<li class="level2"><div class="li"> Set the initial state for <code><span style='color:blue; '>_Q</span></code> to <code>high</code> by using the property editor.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>D</span></code> while holding <kbd class="__keyboard">Ctrl</kbd> and <kbd class="__keyboard">Shift</kbd> to add a <code>destabilise</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>D</span></code> to add a <code>stabilise</code> transition.</div>
</li>
</ul>
</li>
</ul>
</div>
<p>
The following figure shows a possible implementation of this initialisation. 
</p>

<p>
<img src="wtg_flipflop-initialisation.svg" width="236" height="103" class="svgscaleinsert mediacenter" alt="tutorial:model:d_flip_flop:wtg_flipflop-initialisation.svg">
</p>

<p>
In the previous figure we show all four signals, even though the waveform only has transitions for <code><span style='color:red; '>D</span></code>. The <abbr title="Waveform Transition Graph">WTG</abbr> model would be correct if we didn&#039;t use signals in waveforms that do not have transitions for them<sup><a href="#fn__1" id="fnt__1" class="fn_top">1)</a></sup>. Yet, it is sometimes helpful to keep them for improved readability. Decide if you want to show unused signals or not according to your needs.
</p>

<p>
Regardless of your choice, we have now initialised the flip-flop and <code><span style='color:red; '>D</span></code> should be set at <code>stable</code> state. This means that <code><span style='color:red; '>D</span></code> might have had an arbitrary number of transitions (including none), but now is guaranteed to remain stable at some unknown value. WTGs allows us to specify how the model should behave depending on the value of a <code>stable</code> signal by using guards.
</p>

<p>
Add two new waveforms and specify a guard for <code><span style='color:red; '>D</span></code> in them: one for <code>low</code> and one for <code>high</code>.
</p>
<p><a class="folder" href="#folded_46dcb24ea3a62b13a5679701b5b847d1_2">Detailed instructions </a></p><div class="folded hidden" id="folded_46dcb24ea3a62b13a5679701b5b847d1_2"><ul>
<li class="level1"><div class="li"> Add a new state and two waveforms.</div>
</li>
<li class="level1"><div class="li"> Connect the <em>initialisation</em> waveform to the new state and the new state to the new waveforms.</div>
</li>
<li class="level1 node"><div class="li"> Set guards for <code><span style='color:red; '>D</span></code>:</div>
<ul>
<li class="level2"><div class="li"> Click on one of the waveforms. In the property editor, write <code>D</code> in the <em>Guard</em> field.</div>
</li>
<li class="level2"><div class="li"> Edit the <em>Guard</em> field for the other waveform and write <code>!D</code>.</div>
</li>
</ul>
</li>
</ul>
</div>
<p>
<img src="wtg_flipflop-guards1.svg" width="458" height="181" class="svgscaleinsert mediacenter" alt="tutorial:model:d_flip_flop:wtg_flipflop-guards1.svg">
</p>

<p>
You can now edit every waveform and model their behavior assuming the value of <code><span style='color:red; '>D</span></code>. Let us start with the waveform that guards for <code>low</code>. The first transition has to be for <code><span style='color:red; '>CLK</span></code>. Since it is a <code>raise</code> transition, the value of <code><span style='color:red; '>D</span></code> is captured and propagated to the outputs. Note that, since these outputs were already capturing a value of <code>low</code>, their value remains the same. 
</p>

<p>
But the transition for <code><span style='color:red; '>CLK</span></code> has an additional effect: the transitions for <code><span style='color:red; '>D</span></code> must again be ignored. This signal should now <code>destabilise</code> and <code>stabilise</code> before the end of the waveform. Add a <code>fall</code> transition for <code><span style='color:red; '>CLK</span></code> in order to make this waveform a self-contained scenario. Rename this waveform into <em>d_low_q_same</em>.
</p>

<p>
Finally, since the state of all signals matches that of the initialisation, add a connection between the waveform and the previous state. If <code><span style='color:red; '>D</span></code> has stabilised to <code>low</code> again, this will prompt this waveform to repeat. If the value has changed to <code>high</code>, then the other scenario will play out.
</p>
<p><a class="folder" href="#folded_46dcb24ea3a62b13a5679701b5b847d1_3">Detailed instructions </a></p><div class="folded hidden" id="folded_46dcb24ea3a62b13a5679701b5b847d1_3"><ul>
<li class="level1"><div class="li"> Click on the waveform with a guard for <code>!D</code> and rename it with the property editor into <em>d_low_q_same</em>.</div>
</li>
<li class="level1"><div class="li"> Double click on the waveform to go into the waveform level.</div>
</li>
<li class="level1 node"><div class="li"> Declare the signals:</div>
<ul>
<li class="level2"><div class="li"> Use the property editor to declare the four signals by clicking in the <em>declared</em> checkbox for each signal.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> The raising edge of <code><span style='color:red; '>CLK</span></code> triggers <code><span style='color:red; '>D</span></code> into unstable:</div>
<ul>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>CLK</span></code> to add a <code>rise</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>D</span></code> while holding <kbd class="__keyboard">Ctrl</kbd> and <kbd class="__keyboard">Shift</kbd> to add a <code>destabilise</code> transition.</div>
</li>
<li class="level2"><div class="li"> Add a connection between the transition of <code><span style='color:red; '>CLK</span></code> and the transition of <code><span style='color:red; '>D</span></code>.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Return the inputs to their previous state to finish the scenario.</div>
<ul>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>CLK</span></code> to add a <code>fall</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>D</span></code> to add a <code>stabilise</code> transition.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> After this scenario is played out, the model goes back to its state after initialisation:</div>
<ul>
<li class="level2"><div class="li"> Double click outside of the waveform to move into the state level.</div>
</li>
<li class="level2"><div class="li"> Add a connection between <em>d_low_q_same</em> and its previous state.</div>
</li>
</ul>
</li>
</ul>
</div>
<p>
The following figure shows a possible implementation of this model. Note that, as with the initialisation, the signals <code><span style='color:blue; '>Q</span></code> and <code><span style='color:blue; '>_Q</span></code> could be omitted from this waveform.
</p>

<p>
<img src="wtg_flipflop-d_low_q_same.svg" width="480" height="263" class="svgscaleinsert mediacenter" alt="tutorial:model:d_flip_flop:wtg_flipflop-d_low_q_same.svg">
</p>

<p>
Let us now model the waveform for when <code><span style='color:red; '>D</span></code> is stabilised at <code>high</code>. We will call this scenario <em>d_high_q_rise</em>. This case is similar to the previous scenario, but this time the transition for <code><span style='color:red; '>CLK</span></code> will also trigger transitions for <code><span style='color:blue; '>Q</span></code> and <code><span style='color:blue; '>_Q</span></code>. 
</p>
<p><a class="folder" href="#folded_46dcb24ea3a62b13a5679701b5b847d1_4">Detailed instructions </a></p><div class="folded hidden" id="folded_46dcb24ea3a62b13a5679701b5b847d1_4"><ul>
<li class="level1"><div class="li"> Click on the waveform with a guard for <code>D</code> and rename it with the property editor into <em>d_high_q_rise</em>.</div>
</li>
<li class="level1"><div class="li"> Double click on the waveform to go into the waveform level.</div>
</li>
<li class="level1 node"><div class="li"> Declare the signals:</div>
<ul>
<li class="level2"><div class="li"> Use the property editor to declare the four signals by clicking in the <em>declared</em> checkbox for each signal.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> The raising edge of <code><span style='color:red; '>CLK</span></code> triggers <code>rise</code> and <code>fall</code> transitions for <code><span style='color:blue; '>Q</span></code> and <code><span style='color:blue; '>Q_</span></code> respectively. Additionally, it also triggers a <code>destabilise</code> transition for <code><span style='color:red; '>D</span></code>:</div>
<ul>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>CLK</span></code> to add a <code>rise</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:blue; '>Q</span></code> and <code><span style='color:blue; '>Q_</span></code> to add a <code>rise</code> and <code>fall</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>D</span></code> while holding <kbd class="__keyboard">Ctrl</kbd> and <kbd class="__keyboard">Shift</kbd> to add a <code>destabilise</code> transition.</div>
</li>
<li class="level2"><div class="li"> Add a connection between the transition of <code><span style='color:red; '>CLK</span></code> and the transitions of <code><span style='color:blue; '>Q</span></code>, <code><span style='color:blue; '>Q_</span></code> and <code><span style='color:red; '>D</span></code>.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Return the inputs to their previous state to finish the scenario.</div>
<ul>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>CLK</span></code> to add a <code>fall</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>D</span></code> to add a <code>stabilise</code> transition.</div>
</li>
</ul>
</li>
</ul>
</div>
<p>
The <abbr title="Waveform Transition Graph">WTG</abbr> should look similar to the following figure.
</p>

<p>
<img src="wtg_flipflop-d_high_q_rise.svg" width="517" height="279" class="svgscaleinsert mediacenter" alt="tutorial:model:d_flip_flop:wtg_flipflop-d_high_q_rise.svg">
</p>

<p>
At this point it might be tempting to add a connection between the last waveform and the previous state. Yet this is not possible, since the states for signals <code><span style='color:blue; '>Q</span></code> and <code><span style='color:blue; '>_Q</span></code> do not match the initial states. We have to add two new waveforms with guards for signal <code><span style='color:red; '>D</span></code>. 
</p>

<p>
Add two new waveforms, including the state and the guards and connections. Rename the waveforms into <em>d_high_q_same</em> and <em>d_low_q_fall</em>. Start by designing the scenario from <em>d_high_q_same</em>. Note that, since this scenario returns the signals to their previous states you can add a connection back from the waveform to the state.
</p>
<p><a class="folder" href="#folded_46dcb24ea3a62b13a5679701b5b847d1_5">Detailed instructions </a></p><div class="folded hidden" id="folded_46dcb24ea3a62b13a5679701b5b847d1_5"><ul>
<li class="level1"><div class="li"> Place a new state and two waveforms.</div>
</li>
<li class="level1"><div class="li"> Add a connection between the waveform <em>d_high_q_rise</em> and the new state, and a connection between the new state and the two new waveforms.</div>
</li>
<li class="level1"><div class="li"> Edit the waveform names into <em>d_high_q_same</em> and <em>d_low_q_fall</em>.</div>
</li>
<li class="level1"><div class="li"> Set the guard field to <code>D</code> in the property editor for the waveform <em>d_high_q_same</em>.</div>
</li>
<li class="level1"><div class="li"> Set the guard field to <code>!D</code> in the property editor for the waveform <em>d_low_q_fall</em>.</div>
</li>
<li class="level1"><div class="li"> Double click the waveform <em>d_high_q_same</em> to go into waveform level.</div>
</li>
<li class="level1 node"><div class="li"> Declare the signals:</div>
<ul>
<li class="level2"><div class="li"> Use the property editor to declare the four signals by clicking in the <em>declared</em> checkbox for each signal.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> The raising edge of <code><span style='color:red; '>CLK</span></code> triggers <code><span style='color:red; '>D</span></code> into unstable:</div>
<ul>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>CLK</span></code> to add a <code>rise</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>D</span></code> while holding <kbd class="__keyboard">Ctrl</kbd> and <kbd class="__keyboard">Shift</kbd> to add a <code>destabilise</code> transition.</div>
</li>
<li class="level2"><div class="li"> Add a connection between the transition of <code><span style='color:red; '>CLK</span></code> and the transition of <code><span style='color:red; '>D</span></code>.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Return the inputs to their previous state to finish the scenario.</div>
<ul>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>CLK</span></code> to add a <code>fall</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>D</span></code> to add a <code>stabilise</code> transition.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> After this scenario is played out, the model goes back to its previous state:</div>
<ul>
<li class="level2"><div class="li"> Double click outside of the waveform to move into the state level.</div>
</li>
<li class="level2"><div class="li"> Add a connection between <em>d_high_q_rise</em> and its previous state.</div>
</li>
</ul>
</li>
</ul>
</div>
<p>
Check that your <abbr title="Waveform Transition Graph">WTG</abbr> looks like this.
</p>

<p>
<img src="wtg_flipflop-d_high_q_same.svg" width="785" height="282" class="svgscaleinsert mediacenter" alt="tutorial:model:d_flip_flop:wtg_flipflop-d_high_q_same.svg">
</p>

<p>
Finally, you can complete the last scenario, <em>d_low_q_fall</em>. The state for all the signals at the end of this waveform matches the state after the initialisation, so you can close the loop with a connection between the waveform and the state succeeding the initialisation waveform.
</p>
<p><a class="folder" href="#folded_46dcb24ea3a62b13a5679701b5b847d1_6">Detailed instructions </a></p><div class="folded hidden" id="folded_46dcb24ea3a62b13a5679701b5b847d1_6"><ul>
<li class="level1"><div class="li"> Double click on the waveform <em>d_low_q_fall</em> to go into the waveform level.</div>
</li>
<li class="level1 node"><div class="li"> Declare the signals:</div>
<ul>
<li class="level2"><div class="li"> Use the property editor to declare the four signals by clicking in the <em>declared</em> checkbox for each signal.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> The raising edge of <code><span style='color:red; '>CLK</span></code> triggers <code>fall</code> and <code>rise</code> transitions for <code><span style='color:blue; '>Q</span></code> and <code><span style='color:blue; '>Q_</span></code> respectively. Additionally, it also triggers a <code>destabilise</code> transition for <code><span style='color:red; '>D</span></code>:</div>
<ul>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>CLK</span></code> to add a <code>rise</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:blue; '>Q</span></code> and <code><span style='color:blue; '>Q_</span></code> to add a <code>fall</code> and <code>rise</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>D</span></code> while holding <kbd class="__keyboard">Ctrl</kbd> and <kbd class="__keyboard">Shift</kbd> to add a <code>destabilise</code> transition.</div>
</li>
<li class="level2"><div class="li"> Add a connection between the transition of <code><span style='color:red; '>CLK</span></code> and the transitions of <code><span style='color:blue; '>Q</span></code>, <code><span style='color:blue; '>Q_</span></code> and <code><span style='color:red; '>D</span></code>.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> Return the inputs to their previous state to finish the scenario.</div>
<ul>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>CLK</span></code> to add a <code>fall</code> transition.</div>
</li>
<li class="level2"><div class="li"> Double click on <code><span style='color:red; '>D</span></code> to add a <code>stabilise</code> transition.</div>
</li>
</ul>
</li>
<li class="level1 node"><div class="li"> This scenario returns the state of the model to its state after initialisation:</div>
<ul>
<li class="level2"><div class="li"> Double click outside of the waveform to move into the state level. </div>
</li>
<li class="level2"><div class="li"> Add a connection between <em>d_low_q_fall</em> and the state that follows the <em>initialisation</em> waveform.</div>
</li>
</ul>
</li>
</ul>
</div>
<p>
You can see the final model in the next figure.
</p>

<p>
<img src="wtg_flipflop-final.svg" width="814" height="314" class="svgscaleinsert mediacenter" alt="tutorial:model:d_flip_flop:wtg_flipflop-final.svg">
</p>

</div>
<div class="footnotes">
<div class="fn"><sup><a href="#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<div class="content">There is an exception for waveforms with guards. A signal guarded has to be present in any waveform that guards it, even if there are no transitions for that signal.</div></div>
</div>

                    <!-- wikipage stop -->
                                    </div>
<!--
                <div class="docInfo">
                    workcraft @ <bdi>tutorial/model/d_flip_flop/start.txt</bdi> Â· Modified 2020/04/01 17:33 by <bdi>danil</bdi>                </div>
-->
                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
<!--
            <div id="dokuwiki__pagetools">
                            <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li class="edit"><a href="start.html" title="Edit this page [e]" rel="nofollow" accesskey="e"><span>Edit this page</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg></a></li><li class="revs"><a href="start.html" title="Old revisions [o]" rel="nofollow" accesskey="o"><span>Old revisions</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11 7v5.11l4.71 2.79.79-1.28-4-2.37V7m0-5C8.97 2 5.91 3.92 4.27 6.77L2 4.5V11h6.5L5.75 8.25C6.96 5.73 9.5 4 12.5 4a7.5 7.5 0 0 1 7.5 7.5 7.5 7.5 0 0 1-7.5 7.5c-3.27 0-6.03-2.09-7.06-5h-2.1c1.1 4.03 4.77 7 9.16 7 5.24 0 9.5-4.25 9.5-9.5A9.5 9.5 0 0 0 12.5 2z"/></svg></a></li><li class="backlink"><a href="start.html" title="Backlinks" rel="nofollow"><span>Backlinks</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24.973.973 0 0 1 0-1.42z"/></svg></a></li><li class="export_pdf"><a href="start.html" title="Export to PDF" rel="nofollow"><span>Export to PDF</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14 9h5.5L14 3.5V9M7 2h8l6 6v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m4.93 10.44c.41.9.93 1.64 1.53 2.15l.41.32c-.87.16-2.07.44-3.34.93l-.11.04.5-1.04c.45-.87.78-1.66 1.01-2.4m6.48 3.81c.18-.18.27-.41.28-.66.03-.2-.02-.39-.12-.55-.29-.47-1.04-.69-2.28-.69l-1.29.07-.87-.58c-.63-.52-1.2-1.43-1.6-2.56l.04-.14c.33-1.33.64-2.94-.02-3.6a.853.853 0 0 0-.61-.24h-.24c-.37 0-.7.39-.79.77-.37 1.33-.15 2.06.22 3.27v.01c-.25.88-.57 1.9-1.08 2.93l-.96 1.8-.89.49c-1.2.75-1.77 1.59-1.88 2.12-.04.19-.02.36.05.54l.03.05.48.31.44.11c.81 0 1.73-.95 2.97-3.07l.18-.07c1.03-.33 2.31-.56 4.03-.75 1.03.51 2.24.74 3 .74.44 0 .74-.11.91-.3m-.41-.71l.09.11c-.01.1-.04.11-.09.13h-.04l-.19.02c-.46 0-1.17-.19-1.9-.51.09-.1.13-.1.23-.1 1.4 0 1.8.25 1.9.35M8.83 17c-.65 1.19-1.24 1.85-1.69 2 .05-.38.5-1.04 1.21-1.69l.48-.31m3.02-6.91c-.23-.9-.24-1.63-.07-2.05l.07-.12.15.05c.17.24.19.56.09 1.1l-.03.16-.16.82-.05.04z"/></svg></a></li><li class="menuitemfolded"><a href="javascript:void(0);" title="Fold/unfold all" rel="nofollow" class="fold_unfold_all_new" onclick="fold_unfold_all();"><span>Fold/unfold all</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M 2,0 L 6.5,3 L 2,6 z M 8,6.6 L 12.5,9.6 L 8,12.6 z M 14,13.2 L 20,13.2 L 17,17.7 z"/></svg></a></li><li class="menuitem"><a href="start.html" title="Rename Page" rel="nofollow" class=" plugin_move_page "><span>Rename Page</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M18,4V3A1,1 0 0,0 17,2H5A1,1 0 0,0 4,3V7A1,1 0 0,0 5,8H17A1,1 0 0,0 18,7V6H19V10H9V21A1,1 0 0,0 10,22H12A1,1 0 0,0 13,21V12H21V4H18Z" /></svg></a></li><li class="siteexport_addpage"><a href="start.html" title="Export Page to HTML/PDF" rel="nofollow"><span>Export Page to HTML/PDF</span><svg width="61px" height="51px" viewBox="0 0 61 51" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><path d="M26.1891503,39.0065635 L26.0876578,38.9773206 L60.6523866,1.23972885 L60.4321374,2.11844376 L60.476442,2.07071678 L60.4265202,2.14085429 L49.5024876,45.7237994 L32.8255882,40.9187101 L26,50.508302 L26,39.2103249 L26.1891503,39.0065635 Z M60.9727675,0.862917243 L22.2676619,38.2155059 L-0.00245042233,30.2214566 L60.9727675,0.862917243 Z" id="Paper-Plane"></path></svg></a></li><li class="top"><a href="#dokuwiki__top" title="Back to top [t]" rel="nofollow" accesskey="t"><span>Back to top</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg></a></li>                    </ul>
                </div>
                        </div>
-->
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<!--
<div id="dokuwiki__footer"><div class="pad">
    
    <div class="buttons">
                <a href="https://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="https://php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="../../check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="../../css-validator/check/referer.fe4c581d16fb9f59f07485ddb441e467" title="Valid CSS" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="https://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-dw.png" width="80" height="15"
            alt="Driven by DokuWiki" /></a>
    </div>
</div></div>
-->
    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/taskrunner.324dac580c6f8e151eaead5d0aabbc78.gif" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>
</html>
