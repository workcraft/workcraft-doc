<!DOCTYPE html>
<html lang="en" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>tutorial:design:vme_bus:start - Workcraft</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="theme-color" content="#008800"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="tutorial,design,vme_bus,start"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.html" title="Workcraft"/>
<link rel="start" href="start.html"/>
<link rel="contents" href="start.html" title="Sitemap"/>
<link rel="manifest" href="../../lib/exe/manifest.html"/>
<link rel="alternate" type="application/rss+xml" title="Changes" />
<link rel="alternate" type="application/rss+xml" title="Current namespace" />
<link rel="edit" title="Edit this page" href="start.html"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/tutorial/design/vme_bus/start.xhtml"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="../../_export/raw/tutorial/design/vme_bus/start.raw"/>
<link rel="canonical" href="https://workcraft.org/tutorial/design/vme_bus/start"/>
<link rel="stylesheet" href="../../lib/exe/css.php.t.dokuwiki-light-export.css"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='tutorial:design:vme_bus';var SIG=" --- \/\/[[support@workcraft.org| ]] 2020\/11\/24 09:02\/\/";var JSINFO = {"fastwiki":{"secedit":1,"preview":1,"fastpages":1,"save":0,"fastshow":0,"fastshow_same_ns":1,"fastshow_include":"","fastshow_exclude":"","preload":false,"preload_head":"====47hsjwycv782nwncv8b920m8bv72jmdm3929bno3b3====","preload_batchsize":false,"preload_per_page":false,"locktime":840,"usedraft":1,"text_btn_show":"Show page","templatename":"dokuwiki-light-export"},"plugin_folded":{"hide":"hide","reveal":"reveal"},"move_renameokay":true,"id":"tutorial:design:vme_bus:start","namespace":"tutorial:design:vme_bus","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script charset="utf-8" src="../../lib/exe/jquery.php.t.dokuwiki-light-export.js" defer="defer"></script>
<script charset="utf-8" src="../../lib/exe/js.php.t.dokuwiki-light-export.js" defer="defer"></script>
<!--<![endif]-->
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="shortcut icon" href="../../favicon.ico" />
<link rel="apple-touch-icon" href="../../apple-touch-icon.png" />
    </head>

<body>
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki-light-export loggedIn    ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <h1><a href="../../start.html"  accesskey="" title=""><img src="../../logo.png" width="381" height="64" alt="" /></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
<!--
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li class="action profile"><a href="start.html" title="Profile" rel="nofollow"><span>Profile</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M2 3h20c1.05 0 2 .95 2 2v14c0 1.05-.95 2-2 2H2c-1.05 0-2-.95-2-2V5c0-1.05.95-2 2-2m12 3v1h8V6h-8m0 2v1h8V8h-8m0 2v1h7v-1h-7m-6 3.91C6 13.91 2 15 2 17v1h12v-1c0-2-4-3.09-6-3.09M8 6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3z"/></svg></a></li><li class="action admin"><a href="start.html" title="Admin" rel="nofollow"><span>Admin</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 15.5A3.5 3.5 0 0 1 8.5 12 3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97 0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1 0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z"/></svg></a></li><li class="action logout"><a href="start.html" title="Log Out" rel="nofollow"><span>Log Out</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M17 17.25V14h-7v-4h7V6.75L22.25 12 17 17.25M13 2a2 2 0 0 1 2 2v4h-2V4H4v16h9v-4h2v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9z"/></svg></a></li>                </ul>
            </div>
        -->
        <!-- SITE TOOLS -->
<!--
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="../../start.html" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="tutorial:design:vme_bus:start" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="../..//doku.html.doku.php.html" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="tutorial:design:vme_bus:start" /><input type="hidden" name="sectok" value="76e97b919f59bf5330d969a72ba5bf17" /><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Edit this page</option><option value="revisions">Old revisions</option><option value="export_pdf">Export to PDF</option><option value="menuitemfolded">Fold/unfold all</option><option value="menuitem">Rename Page</option><option value="siteexport_addpage">Export Page to HTML/PDF</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Changes</option><option value="media">Media</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="profile">Profile</option><option value="admin">Admin</option><option value="logout">Log Out</option></optgroup></select><button type="submit">&gt;</button></div></form>            </div>
            <ul>
                <li class="action recent"><a href="start.html" title="Changes [r]" rel="nofollow" accesskey="r">Changes</a></li><li class="action media"><a href="start.html" title="Media" rel="nofollow">Media</a></li><li class="action index"><a href="start.html" title="Sitemap [x]" rel="nofollow" accesskey="x">Sitemap</a></li>            </ul>
        </div>
-->
    </div>

    <!-- BREADCRUMBS -->
<!--
    -->


    <hr class="a11y" />
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <div class="pageId"><span>tutorial:design:vme_bus:start</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <div class="plugin_fastwiki_marker" style="display:none"></div><!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#modelling">Modelling</a></div></li>
<li class="level1"><div class="li"><a href="#validation_and_formal_verification_of_the_stg_specification">Validation and formal verification of the STG specification</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#validation">Validation</a></div></li>
<li class="level2"><div class="li"><a href="#formal_verification">Formal verification</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="#synthesis">Synthesis</a></div></li>
<li class="level1"><div class="li"><a href="#verification_of_the_circuit_implementation">Verification of the circuit implementation</a></div></li>
<li class="level1"><div class="li"><a href="#solutions">Solutions</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 id="design_of_vme_bus_controller">Design of VME bus controller</h1>
<div class="level1">

<p>
A controller for <a href="https://en.wikipedia.org/wiki/VME bus" class="interwiki iw_wp" title="https://en.wikipedia.org/wiki/VME bus">VME bus</a> provides an interface between a data bus and a slave device, as shown in the following diagram.
</p>

<p>
<img src="vme.schematic.svg" width="329" height="175" class="svgscaleinsert mediacenter" alt="tutorial:design:vme_bus:vme.schematic.svg">
</p>

<p>
The controller has two modes of operation: reading from the device into the bus (activated by <code><span style='color:red; '>dsr+</span></code>) and writing from the bus into the device (activated by <code><span style='color:red; '>dsw+</span></code>).
</p>

<p>
In the reading mode, a request to read data form the device is made through <code><span style='color:blue; '>lds+</span></code>. When the device has the data ready and this is acknowledged by <code><span style='color:red; '>ldtack+</span></code>, the controller opens the transceiver by <code><span style='color:blue; '>d+</span></code> and notifies the bus that data is ready for transfer by <code><span style='color:blue; '>dtack+</span></code>. After the read operation is complete, all the signals return to the initial state.
</p>

<p>
In the writing mode, once the data is stable on the bus, the transceiver is opened by <code><span style='color:blue; '>d+</span></code>, and the write request is made by <code><span style='color:blue; '>lds+</span></code>. When the device acknowledges the receipt of data by <code><span style='color:red; '>ldtack+</span></code>, the transceiver is closed with <code><span style='color:blue; '>d-</span></code>, thus isolating the device from the bus, and the bus is notified that the write operation is complete by <code><span style='color:blue; '>dtack+</span></code>. After that all the signals return to the initial state.
</p>

<p>
These two modes of VME control are captured by the following timing diagrams.
</p>
<div class="plugin_wrap"><div class="wrap_column wrap_half plugin_wrap"><div class="table sectionedit5"><table class="inline">
	<tr class="row0">
		<td class="col0"><img src="vme-read.td.svg" width="270" height="113" class="svgscaleinsert mediacenter" alt="tutorial:design:vme_bus:vme-read.td.svg"></td>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  Timing diagram for the read mode  </td>
	</tr>
</table></div>
</div><div class="wrap_column wrap_half plugin_wrap"><div class="table sectionedit8"><table class="inline">
	<tr class="row0">
		<td class="col0"><img src="vme-write.td.svg" width="270" height="113" class="svgscaleinsert mediacenter" alt="tutorial:design:vme_bus:vme-write.td.svg"></td>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  Timing diagram for the write mode  </td>
	</tr>
</table></div>
</div></div>
</div>

<h2 id="modelling">Modelling</h2>
<div class="level2">

<p>
Model the read mode of VME controller with an <abbr title="Signal Transition Graph">STG</abbr>. For this capture the sequence of events of the corresponding timing diagram. Save the result in <em>vme-read.stg.work</em> file. Do the same for the write mode of VME bus control and save the result in <em>vme-write.stg.work</em> file.
</p>

<p>
The result should be similar to the following STGs.
</p>
<div class="plugin_wrap"><div class="wrap_column wrap_half plugin_wrap"><div class="table sectionedit13"><table class="inline">
	<tr class="row0">
		<td class="col0"><img src="vme-read.stg.svg" width="135" height="300" class="svgscaleinsert mediacenter" alt="tutorial:design:vme_bus:vme-read.stg.svg"></td>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  <abbr title="Signal Transition Graph">STG</abbr> for read operation  </td>
	</tr>
</table></div>
</div><div class="wrap_column wrap_half plugin_wrap"><div class="table sectionedit16"><table class="inline">
	<tr class="row0">
		<td class="col0"><img src="vme-write.stg.svg" width="135" height="300" class="svgscaleinsert mediacenter" alt="tutorial:design:vme_bus:vme-write.stg.svg"></td>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  <abbr title="Signal Transition Graph">STG</abbr> for write operation  </td>
	</tr>
</table></div>
</div></div>
<p>
The two STGs describe the behaviour of the same circuit and need to be combined into one specification by merging their initial states. Create a new <abbr title="Signal Transition Graph">STG</abbr> work called <em>stg-vme-read_write</em> and copy-paste the STGs from <em>stg-vme-read</em> and <em>stg-vme-write</em> works into it. Merge places <code>p1r</code> and <code>p1w</code> into a single place by first selecting them (hold <kbd class="__keyboard">Shift</kbd> and click them with the mouse) and then using the <em>Transformations→Merge selected places</em> menu item. Rename the resulting place to <code>p1</code>. Similarly, merge <code>p2r</code> and <code>p2w</code> and rename the resulting place to <code>p2</code>. The result should look as follows.
</p>
<div class="plugin_wrap"><div class="table sectionedit19"><table class="inline">
	<tr class="row0">
		<td class="col0"><img src="vme-read_write.stg.svg" width="290" height="300" class="svgscaleinsert mediacenter" alt="tutorial:design:vme_bus:vme-read_write.stg.svg"></td>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  Combined <abbr title="Signal Transition Graph">STG</abbr> for read and write scenarios  </td>
	</tr>
</table></div>
</div><div class="wrap_tip wrap_center wrap_round plugin_wrap" style="width: 90%;">
<p>
Note that place <code>p2</code> is a <em>controlled choice</em> whose decision is determined by the <em>free choice</em> place <code>p1</code>.
</p>
</div><div class="wrap_tip wrap_center wrap_round plugin_wrap" style="width: 90%;">
<p>
Note the concurrency between the transitions resetting the device (<code><span style='color:blue; '>lds-</span></code> and <code><span style='color:red; '>ldtack-</span></code>) and the new requests from the bus (<code><span style='color:red; '>dsr+</span></code> and <code><span style='color:red; '>dsw+</span></code>): A new request can arrive while the device is still resetting, thereby allowing concurrent operation of the bus and the device. This concurrency is the “meaning of life” of VME bus controller.
</p>
</div><div class="wrap_box wrap_center wrap_round plugin_wrap" style="width: 90%;">
<h4 id="optional_simplification">Optional simplification</h4>

<p>
Once the initially marked places are merged, one can notice that transitions <code><span style='color:red; '>ldtack-</span></code>, <code><span style='color:blue; '>lds-</span></code> and <code><span style='color:blue; '>dtack-</span></code> occur in both branches of the choice and can be merged. Here is the simplified <abbr title="Signal Transition Graph">STG</abbr>.
</p>
<div class="plugin_wrap"><div class="table sectionedit28"><table class="inline">
	<tr class="row0">
		<td class="col0"><img src="vme.stg.svg" width="208" height="300" class="svgscaleinsert mediacenter" alt="tutorial:design:vme_bus:vme.stg.svg"></td>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  Simplified <abbr title="Signal Transition Graph">STG</abbr> for read and write scenarios  </td>
	</tr>
</table></div>
</div></div>
</div>

<h2 id="validation_and_formal_verification_of_the_stg_specification">Validation and formal verification of the STG specification</h2>
<div class="level2">

</div>

<h3 id="validation">Validation</h3>
<div class="level3">

<p>
Activate the <strong>simulation tool</strong> <img src="../../../help/core/editor_tools-simulate.png" class="media" title="[M] Simulate" alt="[M] Simulate" /> and exercise the obtained <abbr title="Signal Transition Graph">STG</abbr> model to better understand the behaviour of VME bus controller. Click one of the enabled signal transitions (they are highlighted in orange) to <em>fire</em> it. Note that the sequence of fired transitions is recorded in the simulation trace that is somewhat similar to the original timing diagram. Check that the simulation traces correspond to the intended behaviour of VME bus controller.
</p>

</div>

<h3 id="formal_verification">Formal verification</h3>
<div class="level3">

</div>

<h4 id="standard_properties">Standard properties</h4>
<div class="level4">

<p>
Verify that the <abbr title="Signal Transition Graph">STG</abbr> specification satisfies the following properties using <em>Verification</em> menu:
</p>
<ul>
<li class="level1"><div class="li"> Deadlock freeness – every reachable marking enables at least one transition. </div>
</li>
<li class="level1"><div class="li"> Consistency – the &#039;+&#039; and &#039;-&#039; transitions of every signal alternate in every execution, always starting with the same sign. </div>
</li>
<li class="level1"><div class="li"> Input properness – an input cannot be disabled by an output or internal signal, and cannot be triggered by an internal signal. </div>
</li>
<li class="level1"><div class="li"> Output persistency – an enabled output or internal signal cannot be disabled by any other signal. </div>
</li>
<li class="level1"><div class="li"> Output determinacy – the <abbr title="Signal Transition Graph">STG</abbr> is not self-contradictory, i.e. one cannot find a pair of traces having a common prefix, with one of them requiring and the other forbidding to produce a particular output after this prefix; note that for non-deterministic STGs like this one this propery is essential.</div>
</li>
</ul>

<p>
These are basic soundness properties which should be satisfied by most models – <em>Verification</em> menu has an entry that can check all these properties with a single click.
</p>

</div>

<h4 id="verification_of_handshakes">Verification of handshakes</h4>
<div class="level4">

<p>
Some signals in this model are expected to follow the handshake protocol, as follows:
</p>
<ul>
<li class="level1"><div class="li"> <code>{<span style='color:red; '>dsr</span>,<span style='color:red; '>dsw</span>}</code> / <code><span style='color:blue; '>dtack</span></code> must form a passive handshake with the request either <code><span style='color:red; '>dsr</span></code> or <code><span style='color:red; '>dsw</span></code> (these signals must be mutually exclusive), and the acknowledgement <code><span style='color:blue; '>dtack</span></code>;</div>
</li>
<li class="level1"><div class="li"> <code><span style='color:blue; '>lds</span></code> / <code><span style='color:red; '>ldtack</span></code> must form an active handshake.</div>
</li>
</ul>

<p>
These two handshakes must be verified as described in the <a href="../../method/handshake_verification/start.html" class="wikilink1" title="tutorial:method:handshake_verification:start" data-wiki-id="tutorial:method:handshake_verification:start">Handshakes Verification tutorial</a>.
</p>

</div>

<h4 id="verification_of_complete_state_coding_csc">Verification of complete state coding (CSC)</h4>
<div class="level4">

<p>
Now check whether the <abbr title="Signal Transition Graph">STG</abbr> satisfies the <em>Complete State Coding (CSC)</em> property using <em>Verification→Complete State Coding (all cores) [MPSat]</em> menu item. This <abbr title="Signal Transition Graph">STG</abbr> does not have CSC, which means there are two reachable states that have the same value of all signals but enable different outputs. These states are said to be in <em>CSC conflict</em>. Specifications with CSC conflicts cannot be directly implemented as circuits. One way of resolving CSC conflicts is to insert new <span style='color:green; '>internal</span> signals into the <abbr title="Signal Transition Graph">STG</abbr>. These internal signals add memory into the circuit helping it to trace the current state. More about CSC conflicts and resolving them can be found in <a href="../../method/csc_resolution/start.html" class="wikilink1" title="tutorial:method:csc_resolution:start" data-wiki-id="tutorial:method:csc_resolution:start">another tutorial</a>.
</p>

</div>

<h2 id="synthesis">Synthesis</h2>
<div class="level2">
<div class="wrap_important wrap_center wrap_round plugin_wrap" style="width: 90%;">
<p>
Note that the synthesis solutions shown in this section are not unique and you may get a slightly different results.
</p>
</div>
<p>
Resolve the CSC conflicts automatically using Petrify via <em>Tools→Encoding conflicts→Resolve CSC conflicts [Petrify]</em> menu. Petrify will insert a new internal signal <code><span style='color:green; '>csc0</span></code> distinguishing between conflicting states. The result could look like the following <abbr title="Signal Transition Graph">STG</abbr>:
</p>

<p>
<img src="vme-csc.stg.svg" width="912" height="149" class="svgscaleinsert mediacenter" alt="tutorial:design:vme_bus:vme-csc.stg.svg">
</p>

<p>
The obtained <abbr title="Signal Transition Graph">STG</abbr> specification has CSC and can now be synthesised into an asynchronous circuit. A complex-gate solution obtained via <em>Synthesis→Complex gate [MPSat]</em> is as follows <span class="wrap_download "><a href="vme-cg.circuit.work" class="media mediafile mf_work" title="tutorial:design:vme_bus:vme-cg.circuit.work (5.4 KB)">vme-cg.circuit.work</a> (5 KiB)</span>:
</p>

<p>
<img src="vme-cg.circuit.svg" width="413" height="362" class="svgscaleinsert mediacenter" alt="tutorial:design:vme_bus:vme-cg.circuit.svg">
</p>

<p>
This solution uses complex gates that do not usually exist in real gate libraries. Such gates need to be decomposed, so they can be <em>mapped</em> into the existing library gates – this is done by technology mapping. Note that speed-independence of the circuit must be preserved during decomposition.
</p>

<p>
The library of available gates can be passed to Workcraft in <em>SIS GenLib</em> format via <em>Digital Circuit→Gate library for technology mapping</em> option in global settings (<em>Edit→Preferences…</em>). By default <code>libraries/workcraft.lib</code> is used. It defines a representative set of gates found in several modern gate libraries and also C-elements and uses a generalised naming convention for gates and pins.
</p>

<p>
The results of technology mapping into <code>libraries/workcraft.lib</code> gate library via <em>Synthesis→Technology mapping [MPSat]</em> is as follows <span class="wrap_download "><a href="vme-tm.circuit.work" class="media mediafile mf_work" title="tutorial:design:vme_bus:vme-tm.circuit.work (6.7 KB)">vme-tm.circuit.work</a> (7 KiB)</span>:
</p>

<p>
<img src="vme-tm.circuit.svg" width="629" height="413" class="svgscaleinsert mediacenter" alt="tutorial:design:vme_bus:vme-tm.circuit.svg">
</p>
<div class="wrap_info wrap_center wrap_round plugin_wrap" style="width: 90%;">
<p>
A circuit can be exported to Verilog via <em>File→Export…→Verilog netlist (*.v)</em> menu. By default the produced Verilog uses the names of gates and pins as they are defined in the GenLib file. These names can be substituted by providing a conversion file in <em>Digital Circuit→Substitution rules for export</em> global preferences. For example, <code>libraries/workcraft-tsmc_ghp.cnv</code> file has rules to convert <code>librarys/workcraft.lib</code> gates to match the naming convention of TSMC GHP library.
</p>
</div>
</div>

<h2 id="verification_of_the_circuit_implementation">Verification of the circuit implementation</h2>
<div class="level2">

<p>
Make sure that the original <abbr title="Signal Transition Graph">STG</abbr> describing the contract with the environment and the circuit model is set up:
</p>
<ul>
<li class="level1"><div class="li"> In the circuit editor make sure that no components are selected (click on the editor canvas).</div>
</li>
<li class="level1"><div class="li"> In the property editor the <em>Environment</em> property should point to the work file with the original <abbr title="Signal Transition Graph">STG</abbr> specification.</div>
</li>
</ul>
<div class="wrap_center wrap_round wrap_important plugin_wrap" style="width: 90%;">
<p>
For circuits synthesised within Workcraft this property is automatically set up to the <abbr title="Signal Transition Graph">STG</abbr> that was used for synthesis, i.e. in this case to the <abbr title="Signal Transition Graph">STG</abbr> with internal signals inserted to resolve CSC conflicts. You should modify it to point to the original <abbr title="Signal Transition Graph">STG</abbr>.
</p>
</div>
<p>
Use the <em>Verification</em> menu to verify that the circuit implementation is:
</p>
<ul>
<li class="level1"><div class="li"> conforms to the original <abbr title="Signal Transition Graph">STG</abbr> specification;</div>
</li>
<li class="level1"><div class="li"> deadlock-free;</div>
</li>
<li class="level1"><div class="li"> output persistent.</div>
</li>
</ul>

<p>
All these verification steps can be run via <em>Verification→Conformation, deadlock freeness, output persistency (reuse unfolding) [MPSat]</em> menu.
</p>
<div class="wrap_center wrap_round wrap_important plugin_wrap" style="width: 90%;">
<p>
In theory, synthesised circuits are correct-by-construction. In practice, the synthesis tools are very complicated and may have bugs, so formally verifying the circuits is essential. This is especially true if the circuit was edited manually.
</p>
</div><div class="wrap_hide plugin_wrap">
<h4 id="optional">Optional</h4>

<p>
Decompose one of the complex gates by splitting it into simple gates and verify the circuit for output persistency. If a violation of output persistency is reported (most likely it will be), then play back the trace leading to the problematic state to better understand why the naive decomposition does not work.
</p>
</div>
</div>

<h2 id="solutions">Solutions</h2>
<div class="level2">

<p>
Download all the Workcraft models discussed in this section here:
</p>

<p>
<span class="wrap_download "><a href="vme.zip" class="media mediafile mf_zip" title="tutorial:design:vme_bus:vme.zip (31.1 KB)">VME bus controller models</a> (31 KiB)</span>
</p>

</div>
<div class="level1">
<div class="plugin_include_content plugin_include__tutorial:feedback" id="plugin_include__tutorial__feedback">
<div class="wrap_hide plugin_wrap"><pre class="code">===== Feedback =====</pre>
<form class="bureaucracy__plugin" id="bureaucracy__plugin1" enctype="multipart/form-data" method="post" action="start.html" accept-charset="utf-8"><div class="no">
<input type="hidden" name="sectok" value="76e97b919f59bf5330d969a72ba5bf17" /><input type="hidden" name="id" value="tutorial:design:vme_bus:start" /><input type="hidden" name="bureaucracy[$$id]" value="1" /><fieldset ><legend>Comments or suggestions for improving this tutorial</legend>
<label><span>Name (optional)</span> <input type="text" name="bureaucracy[1]" class="edit" /></label>
<label><span>Email (optional)</span> <input type="text" name="bureaucracy[2]" class="edit" /></label>
<label class=" textareafield">
    <span>Feedback <sup>*</sup></span>
    <textarea name="bureaucracy[3]" id="" rows="10" cols="10" class="edit required&quot; required=&quot;required"></textarea>
</label><button type="submit">Submit</button>
</fieldset>
</div></form>
</div><div class="wrap_hide plugin_wrap"><ul>
<li class="level1"><div class="li"> As discussed in <a href="https://www.dokuwiki.org/plugin:include#controlling_header_size_in_included_pages" class="urlextern" title="https://www.dokuwiki.org/plugin:include#controlling_header_size_in_included_pages" rel="ugc nofollow">https://www.dokuwiki.org/plugin:include#controlling_header_size_in_included_pages</a>, by default, the headers in included pages start one level lower than the last header in the current page. This can be tweaked by adding an empty header above the include:\\<pre class="code">====== ======
{{page&gt;:tutorial:feedback&amp;inline}}</pre>
</div>
</li>
<li class="level1"><div class="li"> For offline help generation the content of <code>feedback</code> page should be temporary wrapped in <code>&lt;WRAP hide&gt;</code>. Note that the headers still propagate to the table of contents even if inside the hidden wrap. Therefore the <strong>Feedback</strong> title needs to be converted to something else, e.g. to code by adding two spaces in front.</div>
</li>
</ul>
</div></div>

</div>

                    <!-- wikipage stop -->
                                    </div>
<!--
                <div class="docInfo">
                    workcraft @ <bdi>tutorial/design/vme_bus/start.txt</bdi> · Modified 2020/06/07 15:27 by <bdi>victor</bdi>                </div>
-->
                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
<!--
            <div id="dokuwiki__pagetools">
                            <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li class="edit"><a href="start.html" title="Edit this page [e]" rel="nofollow" accesskey="e"><span>Edit this page</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg></a></li><li class="revs"><a href="start.html" title="Old revisions [o]" rel="nofollow" accesskey="o"><span>Old revisions</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11 7v5.11l4.71 2.79.79-1.28-4-2.37V7m0-5C8.97 2 5.91 3.92 4.27 6.77L2 4.5V11h6.5L5.75 8.25C6.96 5.73 9.5 4 12.5 4a7.5 7.5 0 0 1 7.5 7.5 7.5 7.5 0 0 1-7.5 7.5c-3.27 0-6.03-2.09-7.06-5h-2.1c1.1 4.03 4.77 7 9.16 7 5.24 0 9.5-4.25 9.5-9.5A9.5 9.5 0 0 0 12.5 2z"/></svg></a></li><li class="backlink"><a href="start.html" title="Backlinks" rel="nofollow"><span>Backlinks</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24m2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24.973.973 0 0 1 0-1.42z"/></svg></a></li><li class="export_pdf"><a href="start.html" title="Export to PDF" rel="nofollow"><span>Export to PDF</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14 9h5.5L14 3.5V9M7 2h8l6 6v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m4.93 10.44c.41.9.93 1.64 1.53 2.15l.41.32c-.87.16-2.07.44-3.34.93l-.11.04.5-1.04c.45-.87.78-1.66 1.01-2.4m6.48 3.81c.18-.18.27-.41.28-.66.03-.2-.02-.39-.12-.55-.29-.47-1.04-.69-2.28-.69l-1.29.07-.87-.58c-.63-.52-1.2-1.43-1.6-2.56l.04-.14c.33-1.33.64-2.94-.02-3.6a.853.853 0 0 0-.61-.24h-.24c-.37 0-.7.39-.79.77-.37 1.33-.15 2.06.22 3.27v.01c-.25.88-.57 1.9-1.08 2.93l-.96 1.8-.89.49c-1.2.75-1.77 1.59-1.88 2.12-.04.19-.02.36.05.54l.03.05.48.31.44.11c.81 0 1.73-.95 2.97-3.07l.18-.07c1.03-.33 2.31-.56 4.03-.75 1.03.51 2.24.74 3 .74.44 0 .74-.11.91-.3m-.41-.71l.09.11c-.01.1-.04.11-.09.13h-.04l-.19.02c-.46 0-1.17-.19-1.9-.51.09-.1.13-.1.23-.1 1.4 0 1.8.25 1.9.35M8.83 17c-.65 1.19-1.24 1.85-1.69 2 .05-.38.5-1.04 1.21-1.69l.48-.31m3.02-6.91c-.23-.9-.24-1.63-.07-2.05l.07-.12.15.05c.17.24.19.56.09 1.1l-.03.16-.16.82-.05.04z"/></svg></a></li><li class="menuitemfolded"><a href="javascript:void(0);" title="Fold/unfold all" rel="nofollow" class="fold_unfold_all_new" onclick="fold_unfold_all();"><span>Fold/unfold all</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M 2,0 L 6.5,3 L 2,6 z M 8,6.6 L 12.5,9.6 L 8,12.6 z M 14,13.2 L 20,13.2 L 17,17.7 z"/></svg></a></li><li class="menuitem"><a href="start.html" title="Rename Page" rel="nofollow" class=" plugin_move_page "><span>Rename Page</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M18,4V3A1,1 0 0,0 17,2H5A1,1 0 0,0 4,3V7A1,1 0 0,0 5,8H17A1,1 0 0,0 18,7V6H19V10H9V21A1,1 0 0,0 10,22H12A1,1 0 0,0 13,21V12H21V4H18Z" /></svg></a></li><li class="siteexport_addpage"><a href="start.html" title="Export Page to HTML/PDF" rel="nofollow"><span>Export Page to HTML/PDF</span><svg width="61px" height="51px" viewBox="0 0 61 51" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><path d="M26.1891503,39.0065635 L26.0876578,38.9773206 L60.6523866,1.23972885 L60.4321374,2.11844376 L60.476442,2.07071678 L60.4265202,2.14085429 L49.5024876,45.7237994 L32.8255882,40.9187101 L26,50.508302 L26,39.2103249 L26.1891503,39.0065635 Z M60.9727675,0.862917243 L22.2676619,38.2155059 L-0.00245042233,30.2214566 L60.9727675,0.862917243 Z" id="Paper-Plane"></path></svg></a></li><li class="top"><a href="#dokuwiki__top" title="Back to top [t]" rel="nofollow" accesskey="t"><span>Back to top</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg></a></li>                    </ul>
                </div>
                        </div>
-->
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<!--
<div id="dokuwiki__footer"><div class="pad">
    
    <div class="buttons">
                <a href="https://www.dokuwiki.org/donate" title="Donate" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="https://php.net" title="Powered by PHP" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="../../check/referer" title="Valid HTML5" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="../../css-validator/check/referer.fe4c581d16fb9f59f07485ddb441e467" title="Valid CSS" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="https://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="../../lib/tpl/dokuwiki-light-export/images/button-dw.png" width="80" height="15"
            alt="Driven by DokuWiki" /></a>
    </div>
</div></div>
-->
    </div></div><!-- /site -->

    <div class="no"><img src="../../lib/exe/taskrunner.e39ff9487f5307936cc97c673a58d32b.gif" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div></body>
</html>
